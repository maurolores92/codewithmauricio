---
import Layout from "../layouts/Layout.astro";
import { getBlogPosts } from '../fetchBlogPosts';
import '../styles/blog.css'; // Importar el archivo CSS
import type { BlogPost } from "types";

// @ts-ignore
const posts: BlogPost[] = await getBlogPosts();
---

<Layout
    title="Blog"
    description="Lee las últimas entradas del blog."
>
    <main class="page-content">
        <h1>Blog</h1>
        
        <section class="introduction">
            <p>
                Bienvenidos a mi blog personal. He decidido crear este espacio para compartir los conocimientos que voy adquiriendo a lo largo de mi carrera en el desarrollo web, así como las tecnologías que estoy explorando e implementando en mis proyectos. Mi objetivo es no solo documentar mi aprendizaje, sino también ayudar a otros desarrolladores y entusiastas a conocer nuevas herramientas y técnicas que podrían serles útiles en su propio camino.
            </p>
            <p>
                Aquí encontrarás artículos sobre diversos temas, desde los fundamentos de la programación hasta las últimas tendencias en la industria. ¡Espero que disfrutes leyendo tanto como yo disfruto compartiendo!
            </p>
        </section>
        
        <ul>
            {posts.map(post => {
                const imageUrl = post.fields.featuredImage?.[0]?.fields?.file?.url;
                const publishDate = new Date(post.fields.publishDate).toLocaleDateString();

                return (
  <li class="blog-post card">
    {imageUrl ? (
      <div class="blog-post-image">
        <img src={imageUrl} alt={post.fields.title} class="featured-image-main" />
      </div>
    ) : null}
    <div class="blog-post-content">
      <h4>{post.fields.title}</h4>
      <p class="publish-date">{publishDate}</p>
      <p>{post.fields.excerpt}</p>
      <a href={`/blog/${post.fields.slug}`}>Leer más</a>
    </div>
  </li>
);
            })}
        </ul>
    </main>
</Layout>